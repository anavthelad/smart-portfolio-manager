<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Portfolio Manager â€“ Dashboard</title>

  <!-- âœ… CORRECT CSS PATH -->
  <link rel="stylesheet" href="/style.css">

  <!-- TradingView -->
  <script src="https://s3.tradingview.com/tv.js"></script>

  <!-- Highcharts -->
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/highcharts-3d.js"></script>
</head>

<body>
<div class="app-layout">

  <!-- ================= SIDEBAR ================= -->
  <aside class="sidebar">
    <div class="sidebar-logo">
      <div class="logo-mark">SP</div>
      <span class="logo-text">Smart Portfolio</span>
    </div>

    <nav class="sidebar-nav">
      <a href="/" class="nav-link active">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-label">Dashboard</span>
      </a>

      <a href="/tasks.html" class="nav-link">
        <span class="nav-icon">ğŸ—‚</span>
        <span class="nav-label">Tasks</span>
      </a>

      <a href="/messages.html" class="nav-link">
        <span class="nav-icon">ğŸ’¬</span>
        <span class="nav-label">Messages</span>
      </a>

      <a href="/activity.html" class="nav-link">
        <span class="nav-icon">ğŸ“ˆ</span>
        <span class="nav-label">Activity</span>
      </a>

      <a href="/calendar.html" class="nav-link">
        <span class="nav-icon">ğŸ“…</span>
        <span class="nav-label">Calendar</span>
      </a>

      <a href="/portfolio.html" class="nav-link">
        <span class="nav-icon">ğŸ“Š</span>
        <span class="nav-label">Portfolio</span>
      </a>

      <a href="/summarizer.html" class="nav-link">
        <span class="nav-icon">ğŸ“„</span>
        <span class="nav-label">Summarizer</span>
      </a>
    </nav>

    <!-- ===== PROFILE (SINGLE, CLEAN) ===== -->
    <div class="sidebar-profile" id="profileToggle">
      <div class="avatar">A</div>
    </div>

    <div class="profile-dropdown" id="profileDropdown">
      <div class="profile-header">
        <div class="avatar big">A</div>
        <div>
          <div class="name">Abhinav</div>
          <div class="email">user@mail.com</div>
        </div>
      </div>

      <div class="menu-item">Account</div>
      <div class="menu-item">Edit Profile</div>
      <div class="menu-item">Settings</div>

      <div class="divider"></div>

      <div class="menu-item logout">Logout</div>
    </div>
  </aside>

  <!-- ================= MAIN ================= -->
  <main class="main">
    <div class="container">

      <!-- ===== HEADER ===== -->
      <header class="header">
        <div class="search-box">
          ğŸ” <input type="text" placeholder="Search tickers..." />
        </div>
      </header>

      <!-- ===== ADD ASSET ===== -->
      <section class="card">
        <div class="card-header">
          <h2>Add Asset</h2>
          <span class="card-subtitle">Quickly add a stock or crypto.</span>
        </div>

        <div class="row">
          <input id="symbol" placeholder="AAPL / BTC / TATA" />
          <input id="qty" type="number" placeholder="Quantity" />
          <input id="buyPrice" type="number" placeholder="Buy Price â‚¹" />
          <input id="stopLoss" type="number" placeholder="Stop Loss â‚¹" />
          <input id="takeProfit" type="number" placeholder="Take Profit â‚¹" />

          <select id="riskCategory">
            <option>Low risk</option>
            <option selected>Medium risk</option>
            <option>High risk</option>
          </select>

          <button onclick="addAsset()">Add</button>
        </div>
      </section>

      <!-- ===== RISK OVERVIEW ===== -->
      <section class="card">
        <div class="card-header">
          <h2>Risk Overview</h2>
          <span class="card-subtitle">Live snapshot of your portfolio.</span>
        </div>

        <div class="stats-grid">
          <span>Total Invested <b id="totalInvested">â‚¹0</b></span>
          <span>Current Value <b id="currentValue">â‚¹0</b></span>
          <span>Profit / Loss <b id="profitLoss">â‚¹0</b></span>
          <span>P/L % <b id="plPercent">0.00%</b></span>
          <span>High-Risk Allocation <b id="highRisk">0%</b></span>
          <span>Risk Score <b id="riskScore">0 / 3</b></span>
        </div>

        <div id="riskAlert" class="risk-alert">
          Add assets to see risk analysis.
        </div>
      </section>

      <!-- ===== ALLOCATION CHART ===== -->
      <section class="card">
        <div class="card-header">
          <h2>Allocation by Value</h2>
        </div>
        <div id="allocationChart3D" style="width:100%; height:420px;"></div>
      </section>

      <!-- ===== LIVE CHART ===== -->
      <section class="card">
        <div class="card-header">
          <h2>Live Candlestick Chart</h2>
        </div>
        <div id="chartContainer" class="chart-box">
          Select an asset to view chart.
        </div>
      </section>

      <!-- ===== PORTFOLIO TABLE ===== -->
      <section class="card">
        <div class="card-header">
          <h2>Your Portfolio</h2>
        </div>

        <table>
          <thead>
            <tr>
              <th>Asset</th>
              <th>Qty</th>
              <th>Buy</th>
              <th>Current</th>
              <th>Value</th>
              <th>P/L</th>
              <th>Risk</th>
            </tr>
          </thead>
          <tbody id="portfolioTable"></tbody>
        </table>
      </section>

    </div>
  </main>
</div>

<!-- âœ… ONLY ONE JS FILE (CORRECT PATH) -->
<script src="/app.js"></script>

<script>
  // Profile dropdown toggle
  const toggle = document.getElementById("profileToggle");
  const dropdown = document.getElementById("profileDropdown");

  toggle.onclick = () => dropdown.classList.toggle("show");
</script>

</body>
</html>
